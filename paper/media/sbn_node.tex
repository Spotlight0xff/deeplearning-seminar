%& /home/spotlight/.config/TikzEdtWForms/TikzEdtWForms/0.2.1.0/temp_header
\documentclass{standalone}
\usepackage{pgfplots}
%\pgfplotsset{compat=1.14}
\begin{document}
\usetikzlibrary{arrows.meta,calc,fit,backgrounds}
%\pgfdeclarelayer{background}
%\pgfsetlayers{background}
\tikzstyle{c} = [circle, draw, fill=blue!20, node distance=3cm, text width=2.5em, text centered]
\tikzstyle{b} = [rectangle, draw, fill=blue!20, node distance=3cm, text width=2.5em, text centered]
\tikzstyle{l} = [draw, -latex',thick]
\tikzstyle{arr} = [thick,-{Latex[length=3mm,width=3mm]}]
\begin{tikzpicture}

\node [c] (prior_1) {\Large $s_j$};
\node [c] (prior_2) at ([shift={(3,0)}] prior_1) {\Large $s_{j+1}$};
\node (prior_others) at ([shift={(1.5,0)}] prior_2) {\Large $\dots$};
\node [c] (prior_n) at ([shift={(1.5,0)}] prior_others) {\Large $s_{i-1}$};

\node (layer_n) at ([shift={(-2,0)}] prior_1) {\Large Layer $n$};
%\node (layer_n_1) at ([shift={(-2,5)}] prior_1) {\Large Layer $n-1$};
\begin{pgfonlayer}{background}
\node[
      fill=black!20,node distance=4cm,,inner sep = 1em,
      fit=(layer_n) (prior_1) (prior_2) (prior_n)] (layer_n_node){};
%TODO: set width according to layer_n_node
\node[
      fill=black!20] (layer_n_1) at ([shift={(0,2)}] layer_n_node){\Large Layer $n-1$};
\end{pgfonlayer}

\node [c] (state_i) at ([shift={(0,-3)}] prior_2) {\Large $s_i$};

\draw[arr] (prior_1) -- node [left]{\Large $W_{i,j}$} (state_i);
\draw[arr] (prior_2) -- (state_i);
\draw[arr] (prior_n) -- (state_i);


% maybe reduce to \draw?
\draw[-{latex}] ($(prior_1)+(-1.5,1.5)$) -- (prior_1);
\draw[-{latex}]($(prior_1)+(0,2)$) -- (prior_1);
\draw[-{latex}]($(prior_1)+(1.5,1.5)$) -- (prior_1);
\end{tikzpicture}
\end{document}
